#!/usr/bin/env zsh

source ~/.config/.variables

function replace_monitors() {
    sed "s/@MONITOR_LEFT/$MONITOR_LEFT/" $1 | \
    sed "s/@MONITOR_CENTER/$MONITOR_CENTER/" | \
    sed "s/@MONITOR_RIGHT/$MONITOR_RIGHT/" | \
    sed "s/@MONITOR_LAPTOP/$MONITOR_LAPTOP/"
}

kanshi_config=~/.config/kanshi/config
sway_variables=~/.config/sway/variables
waybar_config=~/.config/waybar/config

echo "# this file is autogenerated by ~/.bin/sway-config" > $kanshi_config
echo "" >> $kanshi_config
replace_monitors "$kanshi_config"-template >> $kanshi_config
echo "# this file is autogenerated by ~/.bin/sway-config" > $sway_variables
echo "" >> $sway_variables
replace_monitors "$sway_variables"-template >> $sway_variables

replace_monitors "$waybar_config"-template > $waybar_config
sass ~/.config/waybar/style.scss ~/.config/waybar/style.css --no-source-map &


