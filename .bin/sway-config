#!/usr/bin/env zsh

source ~/.config/.variables
source ~/.config/.local-variables

function replace_monitors() {
    sed "s/@MONITOR_LEFT/$MONITOR_LEFT/" $1 | \
    sed "s/@MONITOR_CENTER/$MONITOR_CENTER/" | \
    sed "s/@MONITOR_RIGHT/$MONITOR_RIGHT/" | \
    sed "s/@MONITOR_LAPTOP/$MONITOR_LAPTOP/" | \
    sed "s/@MONITOR_TV/$MONITOR_TV/" | \
    sed "s/@MONITOR_HOME_LEFT/$MONITOR_HOME_LEFT/" | \
    sed "s/@MONITOR_HOME_CENTER/$MONITOR_HOME_CENTER/" | \
    sed "s/@MONITOR_HOME_RIGHT/$MONITOR_HOME_RIGHT/" | \
    sed "s/@MONITOR_HOME_TV/$MONITOR_HOME_TV/" | \
    sed "s/@MONITOR_WORK_LEFT/$MONITOR_WORK_LEFT/" | \
    sed "s/@MONITOR_WORK_CENTER/$MONITOR_WORK_CENTER/" | \
    sed "s/@MONITOR_WORK_RIGHT/$MONITOR_WORK_RIGHT/" | \
    sed "s/@MONITOR_WORK_LAPTOP/$MONITOR_WORK_LAPTOP/"
}

kanshi_config=~/.config/kanshi/config
sway_variables=~/.config/sway/variables
waybar_config=~/.config/waybar/config

echo "# this file is autogenerated by ~/.bin/sway-config" > $kanshi_config
echo "" >> $kanshi_config
replace_monitors "$kanshi_config"-template >> $kanshi_config
echo "# this file is autogenerated by ~/.bin/sway-config" > $sway_variables
echo "" >> $sway_variables
replace_monitors "$sway_variables"-template >> $sway_variables

replace_monitors "$waybar_config"-template > $waybar_config
sass ~/.config/waybar/style.scss ~/.config/waybar/style.css --no-source-map &


