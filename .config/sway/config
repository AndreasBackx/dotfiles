include ~/.config/sway/variables

exec kanshi

bindswitch --locked lid:off output $MONITOR_LAPTOP enable
bindswitch --locked lid:on output $MONITOR_LAPTOP disable

### Environment
exec_always systemctl --user import-environment

### Idle configuration
exec_always swayidle -d \
    timeout 10 'if pgrep swaylock; then swaymsg "output * dpms off"; fi'\
        resume 'if pgrep swaylock; then swaymsg "output * dpms on"; fi' \
    timeout 3600 'lock' \
    timeout 3602 'swaymsg "output * dpms off"' \
        resume 'swaymsg "output * dpms on"' \
    before-sleep 'lock' >> /var/log/swayidle.log
exec_always pgrep -x "waycorner" > /dev/null || waycorner

include ~/.config/sway/base

bindsym XF86MonBrightnessUp exec monitors brightness up
bindsym XF86MonBrightnessDown exec monitors brightness down

bindsym --locked Ctrl+Alt+Tab exec "pamixer --toggle-mute; dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause"
bindsym --locked XF86AudioPlay exec "pamixer --toggle-mute; dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause"
bindsym --locked XF86AudioStop exec "dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Stop"
bindsym --locked XF86AudioPrev exec "dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous"
bindsym --locked XF86AudioNext exec "dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next"


# reload the configuration file
bindsym $mod+Shift+c exec sway-config && swaymsg reload


#
# Status Bar:
#
# Read `man 5 sway-bar` for more information about this section.
bar {
    swaybar_command waybar
    position bottom
}

input * {
    xkb_layout us
    xkb_options compose:rctrl
    xkb_options caps:numlock
}

input "2:14:ETPS/2_Elantech_Touchpad" {
    natural_scroll enabled
    tap enabled
}

include /etc/sway/config.d/*
